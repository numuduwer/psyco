<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  
  <mapper namespace="item">
  
  
  	<select id="countAll" resultType="int">
  		select count(*) from item
  	</select> 
  	
  	<select id="itemList" resultType="ItemDTO">
  		<![CDATA[
  		select ITEM_NUM,ITEM_NAME,CONTENT,AMOUNT,STARTDATE,ENDDATE,DISCOUNT_CYCLE,SELLING_STATUS,
  		PROGRESS_STATUS,MAXPRICE,MINPRICE,AUCTION_UNIT,SETT,COMMENT1,MENU_NUM,mem_num,rownum r from item
  		]]>
  	</select>
  	
  	<select id="getItemOne" parameterType="int" resultType="ItemDTO">
  		select * from item where item_num=#{value}
  	</select>
  	
  	
  	
  	
  	
  	<!-- 사장님이 등록한 역경매 상품 전부 긁어오기.(판매중아니여도 가져오기) -->
  	<select id="itemOneCount" parameterType="int" resultType="int">
  		select count(*) from item where mem_num=#{value}
  	</select>
  	
  	<select id="getMyItemList" parameterType="hashmap" resultType="ItemDTO">
  		<![CDATA[
		SELECT rownum rn, ITEM_NUM,ITEM_NAME,CONTENT,AMOUNT,STARTDATE,ENDDATE,DISCOUNT_CYCLE,SELLING_STATUS,
		PROGRESS_STATUS,MAXPRICE,MINPRICE,AUCTION_UNIT,SETT,COMMENT1,MENU_NUM,mem_num  
		FROM item
		WHERE rownum >= #{startRow}
		AND rownum <= #{endRow}
		AND MEM_NUM = #{mem_num}
  		]]>
  	</select>
  	
  	
  	
  	<!-- 해당 역경매 상품 수정 -->
  	<update id="itemModifyAticle" parameterType="ItemDTO">
  		update item set item_name=#{item_name}, selling_status=#{selling_status},
  		amount=#{amount},discount_cycle=#{discount_cycle},comment1=#{comment1},
  		auction_unit=#{auction_unit},startDate=#{startDate},endDate=#{endDate},sett=#{sett}
  		where item_num=#{item_num}
  	</update>
  	
  	
  	<!-- 해당 역경매 상품 삭제 -->
  	<delete id="itemDeleteAticle" parameterType="int">
  		delete from item where item_num=#{item_num}
  	</delete>
  	
  	
  	
  	
  	
  	
  </mapper>