<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
 <!-- namespace : 내부에 쿼리태크 호출시 namespace속성명 쿼리태그 id값-->
 
 <mapper namespace="menu">
 	
 
 	<select id="getMenuData" parameterType="int" resultType="menuDTO" >
 		select * from menu where MENU_NUM = #{value}
 	</select>
 	
 	
 	<update id="update" parameterType="menuDTO" >
		UPDATE menu set MENU_NAME =#{menu_name}, CONTENT =#{content}, MENU_IMG =#{menu_img}, PRICE =#{price}, CATEGORY =#{category}, SEASON =#{season}, SETT =#{sett}, SHOP_NUM =#{shop_num}, REG = sysdate 
  		 where menu_num= #{menu_num}
 	</update>
 	
 	 <delete id="deleteShop" parameterType="int">
 		delete from menu where menu_num =#{value}
 	</delete>
 	

 	<!-- 해당 음식 content 페이지에서 해당가게 이미지 리스트 뿌려주기 -->
	<select id="getContentList" parameterType="int" resultType="itemDTO">
		<![CDATA[
		SELECT rownum rn,item.item_num,menu.menu_img 
		from item item, menu menu 
		WHERE item.shop_num = #{value}
		and menu.menu_num = item.menu_num
		AND item.SELLING_STATUS=3
		AND rownum <= 4
		AND rownum >= 1
  		]]>
	</select>

	<select id="getMenuInfoFromMenuNum" parameterType="int" resultType="menuDTO">
		select * from menu where menu_num=#{value}
	</select>


 </mapper>